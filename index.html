<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>沪指傀儡师 - 沪指傀儡师</title><meta name="author" content="沪指傀儡师"><meta name="copyright" content="沪指傀儡师"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="迷茫的肥仔︿(￣︶￣)︿">
<meta property="og:type" content="website">
<meta property="og:title" content="沪指傀儡师">
<meta property="og:url" content="https://hzkls.github.io/index.html">
<meta property="og:site_name" content="沪指傀儡师">
<meta property="og:description" content="迷茫的肥仔︿(￣︶￣)︿">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hzkls.github.io/self/img/avatar.jpg">
<meta property="article:author" content="沪指傀儡师">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hzkls.github.io/self/img/avatar.jpg"><link rel="shortcut icon" href="/self/img/favicon.png"><link rel="canonical" href="https://hzkls.github.io/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.19/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '沪指傀儡师',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-03-24 22:24:41'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/self/css/badge.css" /><link rel="stylesheet" href="/self/css/banselect.css" /><link rel="stylesheet" href="https://unpkg.com/animate.css@4.1.1/animate.min.css" /><script type="text/javascript" src="https://unpkg.com/node-snackbar@0.1.16/dist/snackbar.min.js"></script><link rel="stylesheet" type="text/css" href="https://unpkg.com/node-snackbar@0.1.16/dist/snackbar.min.css" /><script disable-devtool-auto  src='https://unpkg.com/disable-devtool@0.3.6/disable-devtool.min.js' md5="4818942c2b825534abfb5546388addd8"></script><script src="/self/js/fastkey.js" ></script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/self/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-solid fa-paper-plane"></i><span> 快速导航</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/"><i class="fa-fw fa-brands fa-java"></i><span> java面试八股文</span></a></li><li><a class="site-page child" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%9B%86%E5%90%88/"><i class="fa-fw fa-solid fa-group-arrows-rotate"></i><span> 中间件集合</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://s1.imagehub.cc/images/2023/08/03/index-img.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="沪指傀儡师"><span class="site-name">沪指傀儡师</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-solid fa-paper-plane"></i><span> 快速导航</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/"><i class="fa-fw fa-brands fa-java"></i><span> java面试八股文</span></a></li><li><a class="site-page child" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%9B%86%E5%90%88/"><i class="fa-fw fa-solid fa-group-arrows-rotate"></i><span> 中间件集合</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">沪指傀儡师</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/posts/ecf99c50.html" title="MongoDB高手课笔记"><img class="post-bg" src="https://s2.loli.net/2023/08/05/TIErDl18aXgefNu.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MongoDB高手课笔记"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/ecf99c50.html" title="MongoDB高手课笔记">MongoDB高手课笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-03-21T05:18:23.000Z" title="发表于 2022-03-21 13:18:23">2022-03-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%9B%86%E5%90%88/">中间件集合</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%9B%86%E5%90%88/">中间件集合</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/MongoDB/">MongoDB</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/">极客时间</a></span></div><div class="content">前言
这是极客时间的《MongoDB高手课》视频课程做的笔记。中间件会持续更新。视频课程可以自己搜一下，极客时间的山寨课很多，就是声画不同步看着有点不舒服而已，正版也不贵，新人首单是59。课程介绍说看完这个可以说自己精通MongoDB，欢迎大家在评论区反馈。

MongoDB再入门
关于MongoDB



Question
Answer




什么是 MongoDB？
一个以 JSON 为数据模型的 文档数据库


为什么叫 文档数据库？
文档来自于 JSON Document，并非我们一般理解的 PDF，WORD文档


谁开发的 MongoDB？
上市公司 MongoDB Inc. ，总部位于美国纽约


主要用途
1. 应用数据库，类似于Oracle，MySQL2. 海量数据处理，数据平台


主要特点
1. 建模为可选2. JSON数据模型比较适合开发者3. 支持横向扩展，支持大数据量和并发4. 从4.0版本开始支持ACID事务



MongoDB VS 关系型数据库




MongoDB
RDBMS




数据模型
文档类型
关系模型


数据库类型
OLTP（On ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/bcb6930d.html" title="dubbo篇"><img class="post-bg" src="https://s2.loli.net/2023/08/06/r6SdTAtlRecnJOq.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="dubbo篇"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/bcb6930d.html" title="dubbo篇">dubbo篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-03-02T05:43:14.000Z" title="发表于 2022-03-02 13:43:14">2022-03-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/dubbo%E7%AF%87/">dubbo篇</a></span></div><div class="content">Dubbo 是什么？RPC 又是什么？
Dubbo 是一个分布式服务框架，致力于提供高性能和透明化的 RPC 远程服务调用方案，以及 SOA 服务治理方案。
RPC是远程调用，就是本地机器调用远程机器的一个方法，远程机器返回结果的过程。
主要原因是由于单台服务的性能已经无法满足我们了，在这个流量剧增的时代，只有多台服务器才能支撑起来现有的用户体系，
而在这种体系下，服务越来越多，逐渐演化出了现在这种微服务化的 RPC 框架。
Dubbo 能做什么？
Dubbo 的核心功能主要包含:


远程通讯: dubbo-remoting模块， 提供对多种基于长连接的 NIO 框架抽象封装，包括多种线程模型，序列化，以及“请求-响应”模式的信息交换方式。
集群容错: 提供基于接口方法的透明远程过程调用，包括多协议支持，以及软负载均衡，失败容错，地址路由，动态配置等集群支持。
自动发现: 基于注册中心目录服务，使服务消费方能动态的查找服务提供方，使地址透明，使服务提供方可以平滑增加或减少机器。

能说下 Dubbo 的总体的调用过程吗？
调用过程图：



Proxy 持有一个 Invoker 对象 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/ea4e979e.html" title="23种设计模式"><img class="post-bg" src="https://s2.loli.net/2023/08/08/CUX8IbQD4MGJfcW.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="23种设计模式"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/ea4e979e.html" title="23种设计模式">23种设计模式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-28T16:02:21.000Z" title="发表于 2022-03-01 00:02:21">2022-03-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/23%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">23种设计模式</a></span></div><div class="content">设计模式相关视频，讲得挺好的，至少比马士兵的好，不足的是选集没有排好序，不能自动连播，而且还在连载中
TuringPlanet的设计模式
视频配套代码

七大原则
设计模式七大原则
设计模式六大原则分别为：

单一职责原则（SRP）: 一个类只应该有一个引起它变化的原因，即一个类只负责一项职责。（有点DDD那味儿）


高内聚：避免大而全，避免不相关功能的耦合


低耦合：减少所需要依赖和被依赖的类



开放封闭原则（OCP）：对扩展开放，对修改关闭。当需要改变一个程序的功能或给它增加新功能时，可以通过增加代码来实现，而不是修改已有的代码。

测试简单
可复用性变强
稳定性变高


里氏替换原则（LSP）：子类可以替换其父类并且仍然产生正确的结果。这表明在使用继承时需要非常小心，子类和父类之间的关系应该是is-a。
接口隔离原则（ISP）：客户端不应该依赖那些它不需要使用的接口。一个类对另一个类的依赖性应该是建立在最小的接口上。
依赖倒置原则（DIP）：高层模块不应该依赖于低层模块，两者都应该依赖于抽象。抽象不应该依赖于具体实现，具体实现应该依赖于抽象。这个原则的目的是为了减少类之间 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/717cdc22.html" title="kafka核心技术与实战"><img class="post-bg" src="https://s2.loli.net/2023/08/05/pftSLJ8WCEZoFOV.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kafka核心技术与实战"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/717cdc22.html" title="kafka核心技术与实战">kafka核心技术与实战</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-21T05:18:23.000Z" title="发表于 2022-02-21 13:18:23">2022-02-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%9B%86%E5%90%88/">中间件集合</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/kafka/">kafka</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4%E4%B8%93%E6%A0%8F/">极客时间专栏</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%9B%86%E5%90%88/">中间件集合</a></span></div><div class="content">引论

Kafka 属于分布式的消息引擎系统，它的主要功能是提供一套完备的消息发布与订阅解决方案。在 Kafka 中，发布订阅的对象是主题（Topic），你可以为每个业务、每个应用甚至是每类数据都创建专属的主题。同时，它也是一个分布式流处理平台（Distributed Streaming Platform）

点击获取《kafka核心技术与实战》
点击获取《Kafka多维度系统精讲，从入门到实战开发》
术语
生产者(Producer)、消费者(Consumer)和服务进程Broker


生产者：向主题发布消息的客户端应用程序称为生产者（Producer），生产者程序通常持续不断地向一个或多个主题发送消息


消费者：订阅这些主题消息的客户端应用程序就被称为消费者（Consumer）


服务进程：Kafka 的服务器端由被称为 Broker 的服务进程构成，即一个 Kafka 集群由多个 Broker 组成，Broker 负责接收和处理客户端发送过来的请求，以及对消息进行持久化。
虽然多个 Broker 进程能够运行在同一台机器上，但更常见的做法是将不同的 Broker 分散运行在不 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/ab05b615.html" title="HashMap精选13问"><img class="post-bg" src="https://s2.loli.net/2023/08/05/KFyVCtN5YPgT8hs.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HashMap精选13问"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/ab05b615.html" title="HashMap精选13问">HashMap精选13问<div class="hzkls-badge-page-title">转载</div></a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-11T05:11:20.000Z" title="发表于 2022-02-11 13:11:20">2022-02-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/HashMap%E7%B2%BE%E9%80%8913%E9%97%AE/">HashMap精选13问</a></span></div><div class="content">本文转自 沉默王二

HashMap的底层数据结构是什么？
JDK 7 中，HashMap 由“数组+链表”组成，数组是 HashMap 的主体，链表则是主要为了解决哈希冲突而存在的。
在 JDK 8 中，HashMap 由“数组+链表+红黑树”组成。链表过长，会严重影响 HashMap 的性能，而红黑树搜索的时间复杂度是 O(logn)，而链表是糟糕的 O(n)。因此，JDK 8 对数据结构做了进一步的优化，引入了红黑树，链表和红黑树在达到一定条件会进行转换：

当链表超过 8 且数据总量超过 64 时会转红黑树。
将链表转换成红黑树前会判断，如果当前数组的长度小于 64，那么会选择先进行数组扩容，而不是转换为红黑树，以减少搜索时间。

链表长度超过 8 体现在 putVal 方法中的这段代码：
123//链表长度大于8转换为红黑树进行处理if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st    treeifyBin(tab, hash);
table 长度为 64 体现在 treeifyBin 方法中的这段代码：：
123 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/80596e28.html" title="kafka篇"><img class="post-bg" src="https://s2.loli.net/2023/09/29/nhyZfU8tr56FEBd.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kafka篇"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/80596e28.html" title="kafka篇">kafka篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-11T04:17:00.000Z" title="发表于 2022-02-11 12:17:00">2022-02-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/kafka/">kafka</a></span></div><div class="content">引论

Kafka 属于分布式的消息引擎系统，它的主要功能是提供一套完备的消息发布与订阅解决方案。在 Kafka 中，发布订阅的对象是主题（Topic），你可以为每个业务、每个应用甚至是每类数据都创建专属的主题。同时，它也是一个分布式流处理平台（Distributed Streaming Platform）

点击获取《kafka核心技术与实战》
点击获取《Kafka多维度系统精讲，从入门到实战开发》
Kafka 的设计
Kafka 将消息以 topic 为单位进行归纳，发布消息的程序称为 Producer，消费消息的程序称为 Consumer。它是以集群的方式运行，可以由一个或多个服务组成，每个服务叫做一个 Broker，Producer 通过网络将消息发送到 kafka 集群，集群向消费者提供消息，broker 在中间起到一个代理保存消息的中转站。
Kafka 中重要的组件
1）Producer：消息生产者，发布消息到Kafka集群的终端或服务
2）Broker：一个 Kafka 节点就是一个 Broker，多个Broker可组成一个Kafka 集群。

如果某个 Topic 下有 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/11696cf2.html" title="操作系统(修正版)"><img class="post-bg" src="https://s2.loli.net/2023/08/08/FbzHWdhgL9t8Yak.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/11696cf2.html" title="操作系统(修正版)">操作系统(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-01T06:27:40.000Z" title="发表于 2022-02-01 14:27:40">2022-02-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></span></div><div class="content">引论
什么是操作系统？
可以这么说，操作系统是一种运行在内核态的软件。
它是应用程序和硬件之间的媒介，向应用程序提供硬件的抽象，以及管理硬件资源。

操作系统主要有哪些功能？
操作系统最主要的功能：

处理器（CPU）管理：CPU的管理和分配，主要指的是进程管理。
内存管理：内存的分配和管理，主要利用了虚拟内存的方式。
外存管理：外存（磁盘等）的分配和管理，将外存以文件的形式提供出去。
I/O管理：对输入/输出设备的统一管理。

除此之外，还有保证自身正常运行的健壮性管理，防止非法操作和入侵的安全性管理。

操作系统结构
什么是内核？
可以这么说，内核是一个计算机程序，它是操作系统的核心，提供了操作系统最核心的能力，可以控制操作系统中所有的内容。
什么是用户态和内核态？
内核具有很⾼的权限，可以控制 cpu、内存、硬盘等硬件，出于权限控制的考虑，因此⼤多数操作系统，把内存分成了两个区域：

内核空间，这个内存空间只有内核程序可以访问；
⽤户空间，这个内存空间专⻔给应⽤程序使⽤，权限比较小；

⽤户空间的代码只能访问⼀个局部的内存空间，⽽内核空间的代码可以访问所有内存空间。因此，当程序使 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/fa1f3033.html" title="计算机网络(修正版)"><img class="post-bg" src="https://s2.loli.net/2023/08/06/ABolW9LsxVErJfm.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机网络(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/fa1f3033.html" title="计算机网络(修正版)">计算机网络(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-01T06:27:40.000Z" title="发表于 2022-02-01 14:27:40">2022-02-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="content">计算机网络基础是面试中经常会问到的问题。例如Https是用了几种加密，TCP三次握手和四次挥手等</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/70ea7d93.html" title="mysql篇(修正版)"><img class="post-bg" src="https://s2.loli.net/2023/08/06/NKEpRWFks5AQPtn.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mysql篇(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/70ea7d93.html" title="mysql篇(修正版)">mysql篇(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-01T06:25:05.000Z" title="发表于 2022-02-01 14:25:05">2022-02-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/mysql%E7%AF%87/">mysql篇</a></span></div><div class="content">基础
什么是内连接、外连接、交叉连接、笛卡尔积呢？

内连接（inner join）：取得两张表中满足存在连接匹配关系的记录。
外连接（outer join）：不只取得两张表中满足存在连接匹配关系的记录，还包括某张表（或两张表）中不满足匹配关系的记录。
交叉连接（cross join）：显示两张表所有记录一一对应，没有匹配关系进行筛选，它是笛卡尔积在 SQL 中的实现，如果 A 表有 m 行，B 表有 n 行，那么 A 和 B 交叉连接的结果就有 m*n 行。
笛卡尔积：是数学中的一个概念，例如集合 A={a,b}，集合 B={1,2,3}，那么 A✖️B=&#123;&lt;a,o&gt;,&lt;a,1&gt;,&lt;a,2&gt;,&lt;b,0&gt;,&lt;b,1&gt;,&lt;b,2&gt;,&#125;。

那 MySQL 的内连接、左连接、右连接有有什么区别？
MySQL 的连接主要分为内连接和外连接，外连接常用的有左连接、右连接。

MySQL-joins-来源菜鸟教程

inner join 内连接，在两张表进行连接查询时，只保留两张表中完全匹配的结果集
le ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/c841c453.html" title="mybatis篇(修正版)"><img class="post-bg" src="https://www.toopic.cn/public/uploads/small/1658045822204165804582287.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mybatis篇(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/c841c453.html" title="mybatis篇(修正版)">mybatis篇(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-01T06:15:59.000Z" title="发表于 2022-02-01 14:15:59">2022-02-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/mybatis%E7%AF%87/">mybatis篇</a></span></div><div class="content">基础
说说什么是MyBatis?
先吹一下：

Mybatis 是一个半 ORM（对象关系映射）框架，它内部封装了 JDBC，开发时只需要关注 SQL 语句本身，不需要花费精力去处理加载驱动、创建连接、创建statement 等繁杂的过程。程序员直接编写原生态 sql，可以严格控制 sql 执行性能，灵活度高。
MyBatis 可以使用 XML 或注解来配置和映射原生信息，将 POJO 映射成数据库中的记录，避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。

再说一下缺点

SQL语句的编写工作量较大，尤其当字段多、关联表多时，对开发人员编写SQL语句的功底有一定要求
SQL语句依赖于数据库，导致数据库移植性差，不能随意更换数据库


ORM是什么?



ORM（Object Relational Mapping），对象关系映射，是一种为了解决关系型数据库数据与简单Java对象（POJO）的映射关系的技术。简单来说，ORM是通过使用描述对象和数据库之间映射的元数据，将程序中的对象自动持久化到关系型数据库中。


为什么说Mybatis是半自动ORM映射工具？它与全自动的 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/81f1d6e8.html" title="RocketMq篇(修正版)"><img class="post-bg" src="https://www.toopic.cn/public/uploads/image/20200411/20200411133027_50432.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RocketMq篇(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/81f1d6e8.html" title="RocketMq篇(修正版)">RocketMq篇(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-01T06:11:50.000Z" title="发表于 2022-02-01 14:11:50">2022-02-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/RocketMq%E7%AF%87/">RocketMq篇</a></span></div><div class="content">点击获取《RocketMq大白话讲解》
基础
为什么要使用消息队列呢？
消息队列主要有三大用途，我们拿一个电商系统的下单举例：

解耦：引入消息队列之前，下单完成之后，需要订单服务去调用库存服务减库存，调用营销服务加营销数据……引入消息队列之后，可以把订单完成的消息丢进队列里，下游服务自己去调用就行了，这样就完成了订单服务和其它服务的解耦合。



异步：订单支付之后，我们要扣减库存、增加积分、发送消息等等，这样一来这个链路就长了，链路一长，响应时间就变长了。引入消息队列，除了更新订单状态，其它的都可以异步去做，这样一来就来，就能降低响应时间。



削峰：消息队列合一用来削峰，例如秒杀系统，平时流量很低，但是要做秒杀活动，秒杀的时候流量疯狂怼进来，我们的服务器，Redis，MySQL各自的承受能力都不一样，直接全部流量照单全收肯定有问题啊，严重点可能直接打挂了。

我们可以把请求扔到队列里面，只放出我们服务能处理的流量，这样就能抗住短时间的大流量了。

解耦、异步、削峰，是消息队列最主要的三大作用。
为什么要选择RocketMQ?
市场上几大消息队列对比如下：

总结一下：
选择中间 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/bfedca0c.html" title="分布式系统(修正版)"><img class="post-bg" src="https://www.toopic.cn/public/uploads/small/1642747988119164274798811.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式系统(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/bfedca0c.html" title="分布式系统(修正版)">分布式系统(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-01T06:11:50.000Z" title="发表于 2022-02-01 14:11:50">2022-02-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/">分布式系统</a></span></div><div class="content">分布式理论
说说CAP原则？
CAP原则又称CAP定理，指的是在一个分布式系统中，Consistency（一致性）、 Availability（可用性）、Partition tolerance（分区容错性）这3个基本需求，最多只能同时满足其中的2个。




选项
描述




Consistency（一致性）
指数据在多个副本之间能够保持一致的特性（严格的一致性）


Availability（可用性）
指系统提供的服务必须一直处于可用的状态，每次请求都能获取到非错的响应（不保证获取的数据为最新数据）


Partition tolerance（分区容错性）
分布式系统在遇到任何网络分区故障的时候，仍然能够对外提供满足一致性和可用性的服务，除非整个网络环境都发生了故障



为什么CAP不可兼得呢？
首先对于分布式系统，分区是必然存在的，所谓分区指的是分布式系统可能出现的字区域网络不通，成为孤立区域的的情况。
那么分区容错性（P）就必须要满足，因为如果要牺牲分区容错性，就得把服务和资源放到一个机器，或者一个“同生共死”的集群，那就违背了分布式的初衷。
那么满足分区容错的基础上，能不能 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/a070ed70.html" title="redis篇(修正版)"><img class="post-bg" src="https://www.toopic.cn/public/uploads/small/1638860761518163886076168.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="redis篇(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/a070ed70.html" title="redis篇(修正版)">redis篇(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-01T06:11:50.000Z" title="发表于 2022-02-01 14:11:50">2022-02-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/redis%E7%AF%87/">redis篇</a></span></div><div class="content">基础
说说什么是Redis?
Redis是一种基于键值对（key-value）的NoSQL数据库。
比一般键值对数据库强大的地方，Redis中的value支持string（字符串）、hash（哈希）、 list（列表）、set（集合）、zset（有序集合）、Bitmaps（位图）、 HyperLogLog、GEO（地理信息定位）等多种数据结构，因此 Redis可以满足很多的应用场景。
而且因为Redis会将所有数据都存放在内存中，所以它的读写性能非常出色。
不仅如此，Redis还可以将内存的数据利用快照和日志的形式保存到硬盘上，这样在发生类似断电或者机器故障的时候，内存中的数据不会“丢失”。
除了上述功能以外，Redis还提供了键过期、发布订阅、事务、流水线、Lua脚本等附加功能。
总之，Redis是一款强大的性能利器。
Redis可以用来干什么？



缓存
这是Redis应用最广泛地方，基本所有的Web应用都会使用Redis作为缓存，来降低数据源压力，提高响应速度。



计数器
Redis天然支持计数功能，而且计数性能非常好，可以用来记录浏览量、点赞量等等。


排行榜
Redi ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/574cbe50.html" title="spring框架篇(修正版)"><img class="post-bg" src="https://www.toopic.cn/public/uploads/small/1658045160332165804516032.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="spring框架篇(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/574cbe50.html" title="spring框架篇(修正版)">spring框架篇(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-01T05:53:44.000Z" title="发表于 2022-02-01 13:53:44">2022-02-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/spring%E6%A1%86%E6%9E%B6%E7%AF%87/">spring框架篇</a></span></div><div class="content">基础
Spring 是什么？特性？有哪些模块？
一句话概括：Spring 是一个轻量级、非入侵式的控制反转 (IoC) 和面向切面 (AOP) 的框架。
2003 年，一个音乐家 Rod Johnson 决定发展一个轻量级的 Java 开发框架，Spring作为 Java 战场的龙骑兵渐渐崛起，并淘汰了EJB这个传统的重装骑兵。

到了现在，企业级开发的标配基本就是 Spring5 + Spring Boot 2 + JDK 8

Spring 有哪些特性呢？

Spring 有很多优点：


IOC 和 DI 的支持

Spring 的核心就是一个大的工厂容器，可以维护所有对象的创建和依赖关系，Spring 工厂用于生成 Bean，并且管理 Bean 的生命周期，实现高内聚低耦合的设计理念。

AOP 编程的支持

Spring 提供了面向切面编程，可以方便的实现对程序进行权限拦截、运行监控等切面功能。

声明式事务的支持

支持通过配置就来完成对事务的管理，而不需要通过硬编码的方式，以前重复的一些事务提交、回滚的 JDBC 代码，都可以不用自己写了。

快捷测试的支持

Sprin ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/8d7d8ac3.html" title="JVM篇(修正版)"><img class="post-bg" src="https://s2.loli.net/2023/08/06/kXCVHohucEZrUjd.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM篇(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/8d7d8ac3.html" title="JVM篇(修正版)">JVM篇(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-01T03:27:02.000Z" title="发表于 2022-02-01 11:27:02">2022-02-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/JVM%E7%AF%87/">JVM篇</a></span></div><div class="content">JVM推荐马士兵的这套课，虽然对培训机构推销卖课非常反感，但是不可否认，这套讲得非常清楚。
点击跳转
 
引言
什么是 JVM?
JVM——Java 虚拟机，它是 Java 实现平台无关性的基石。
Java 程序运行的时候，编译器将 Java 文件编译成平台无关的 Java 字节码文件（.class）,接下来对应平台 JVM 对字节码文件进行解释，翻译成对应平台匹配的机器指令并运行。

同时 JVM 也是一个跨语言的平台，和语言无关，只和 class 的文件格式关联，任何语言，只要能翻译成符合规范的字节码文件，都能被 JVM 运行。

内存管理
能说一下 JVM 的内存区域吗？
JVM 内存区域最粗略的划分可以分为堆和栈，当然，按照虚拟机规范，可以划分为以下几个区域：

JVM 内存分为线程私有区和线程共享区，其中方法区和堆是线程共享区，虚拟机栈、本地方法栈和程序计数器是线程隔离的数据区。
1）程序计数器
程序计数器（Program Counter Register）也被称为 PC 寄存器，是一块较小的内存空间。
它可以看作是当前线程所执行的字节码的行号指示器。
2）Java 虚拟机栈 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/aa2ef632.html" title="集合框架篇(修正版)"><img class="post-bg" src="https://www.toopic.cn/public/uploads/small/1642747518333164274751814.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="集合框架篇(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/aa2ef632.html" title="集合框架篇(修正版)">集合框架篇(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-01T03:27:02.000Z" title="发表于 2022-02-01 11:27:02">2022-02-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E7%AF%87/">集合框架篇</a></span></div><div class="content">引言
说说有哪些常见集合？
集合相关类和接口都在java.util中，主要分为3种：List（列表）、Map（映射）、Set(集)。

其中Collection是集合List、Set的父接口，它主要有两个子接口：

List：存储的元素有序，可重复。
Set：存储的元素无序，不可重复。

Map是另外的接口，是键值对映射结构的集合。
List
List，也没啥好问的，但不排除面试官剑走偏锋，比如面试官也看了我这篇文章。

ArrayList和LinkedList有什么区别？
（1）数据结构不同

ArrayList基于数组实现
LinkedList基于双向链表实现


（2） 多数情况下，ArrayList更利于查找，LinkedList更利于增删


ArrayList基于数组实现，get(int index)可以直接通过数组下标获取，时间复杂度是O(1)；LinkedList基于链表实现，get(int index)需要遍历链表，时间复杂度是O(n)；当然，get(E element)这种查找，两种集合都需要遍历，时间复杂度都是O(n)。


ArrayList增删如果是数组末尾的 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/d18c1c50.html" title="并发编程(修正版)"><img class="post-bg" src="https://s2.loli.net/2023/08/05/dytFXz9nOqLWEef.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="并发编程(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/d18c1c50.html" title="并发编程(修正版)">并发编程(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-19T06:57:25.000Z" title="发表于 2022-01-19 14:57:25">2022-01-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">java并发编程</a></span></div><div class="content">基础
并行跟并发有什么区别？
从操作系统的角度来看，线程是CPU分配的最小单位。

并行就是同一时刻，两个线程都在执行。这就要求有两个CPU去分别执行两个线程。
并发就是同一时刻，只有一个执行，但是一个时间段内，两个线程都执行了。并发的实现依赖于CPU切换线程，因为切换的时间特别短，所以基本对于用户是无感知的。

说说什么是进程和线程？
要说线程，必须得先说说进程。

进程：进程是代码在数据集合上的一次运行活动，是系统进行资源分配和调度的基本单位。
线程：线程是进程的一个执行路径，一个进程中至少有一个线程，进程中的多个线程共享进程的资源。

操作系统在分配资源时是把资源分配给进程的， 但是 CPU 资源比较特殊，它是被分配到线程的，因为真正要占用CPU运行的是线程，所以也说线程是 CPU分配的基本单位。
比如在Java中，当我们启动 main 函数其实就启动了一个JVM进程，而 main 函数在的线程就是这个进程中的一个线程，也称主线程。

一个进程中有多个线程，多个线程共用进程的堆和方法区资源，但是每个线程有自己的程序计数器和栈。
说说线程有几种创建方式？
Java中创建线程主要有三 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/f34a924e.html" title="基础知识(修正版)"><img class="post-bg" src="https://s2.loli.net/2023/08/06/RKmhqODeUfs2AaS.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基础知识(修正版)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/f34a924e.html" title="基础知识(修正版)">基础知识(修正版)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-01T02:17:12.000Z" title="发表于 2022-01-01 10:17:12">2022-01-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/">java面试八股文</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">java基础知识</a></span></div><div class="content">Java 概述
什么是 Java？
PS：碎怂 Java，有啥好介绍的。哦，面试啊。
Java 是一门面向对象的编程语言，不仅吸收了 C++语言的各种优点，还摒弃了 C++里难以理解的多继承、指针等概念，因此 Java 语言具有功能强大和简单易用两个特征。Java 语言作为静态面向对象编程语言的优秀代表，极好地实现了面向对象理论，允许程序员以优雅的思维方式进行复杂的编程 。
Java 语言有哪些特点？
Java 语言有很多优秀（可吹）的特点，以下几个是比较突出的：


面向对象（封装，继承，多态）；
平台无关性，平台无关性的具体表现在于，Java 是“一次编写，到处运行（Write Once，Run any Where）”的语言，因此采用 Java 语言编写的程序具有很好的可移植性，而保证这一点的正是 Java 的虚拟机机制。在引入虚拟机之后，Java 语言在不同的平台上运行不需要重新编译。
支持多线程。C++ 语言没有内置的多线程机制，因此必须调用操作系统的多线程功能来进行多线程程序设计，而 Java 语言却提供了多线程支持；
编译与解释并存；

JVM、JDK 和 JRE 有什么区 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/c297e423.html" title="ElementUI表格组件合并单元格（纵向）"><img class="post-bg" src="https://s2.loli.net/2023/09/29/z4jVNXOeaxJUIfk.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElementUI表格组件合并单元格（纵向）"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/c297e423.html" title="ElementUI表格组件合并单元格（纵向）">ElementUI表格组件合并单元格（纵向）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-05-29T14:33:21.000Z" title="发表于 2020-05-29 22:33:21">2020-05-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/vue/">vue</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ElementUI/">ElementUI</a></span></div><div class="content">我是一个后端开发，所以我知道对于一个后端来说，去写这种东西是有多烦。所以把这个纵向合并单元格的功能，封装成一个通用方法，希望能起到抛砖引玉的作用。

ElementUI表格是提供单元格合并的功能的，笔者在实际开发过程中，有遇到业务场景，要求纵向同值合并。以下是代码示例。


util.js
1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * 生成el-table纵向合并相同值单元格的对象 * @param rows 表格数据 * @param prop 判断相同值的属性 * @param obj el-table调用合并方法的回调 */export const calcMergeObj = function(rows, props, &#123;  row,  column,  rowIndex,  columnIndex&#125;) &#123;  if (row[&#x27;merge_mark_&#x27; + props.join(&#x27;#&#x27;) ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/self/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">沪指傀儡师</div><div class="author-info__description">迷茫的肥仔︿(￣︶￣)︿</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">本来想替换一下图床的，没想到麻烦的很。七牛云要备案域名啥的。github是https的，只用服务器ip，又会被谷歌浏览器拦截。就这样吧。</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/ecf99c50.html" title="MongoDB高手课笔记"><img src="https://s2.loli.net/2023/08/05/TIErDl18aXgefNu.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MongoDB高手课笔记"/></a><div class="content"><a class="title" href="/posts/ecf99c50.html" title="MongoDB高手课笔记">MongoDB高手课笔记</a><time datetime="2022-03-21T05:18:23.000Z" title="发表于 2022-03-21 13:18:23">2022-03-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/bcb6930d.html" title="dubbo篇"><img src="https://s2.loli.net/2023/08/06/r6SdTAtlRecnJOq.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="dubbo篇"/></a><div class="content"><a class="title" href="/posts/bcb6930d.html" title="dubbo篇">dubbo篇</a><time datetime="2022-03-02T05:43:14.000Z" title="发表于 2022-03-02 13:43:14">2022-03-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ea4e979e.html" title="23种设计模式"><img src="https://s2.loli.net/2023/08/08/CUX8IbQD4MGJfcW.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="23种设计模式"/></a><div class="content"><a class="title" href="/posts/ea4e979e.html" title="23种设计模式">23种设计模式</a><time datetime="2022-02-28T16:02:21.000Z" title="发表于 2022-03-01 00:02:21">2022-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/717cdc22.html" title="kafka核心技术与实战"><img src="https://s2.loli.net/2023/08/05/pftSLJ8WCEZoFOV.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kafka核心技术与实战"/></a><div class="content"><a class="title" href="/posts/717cdc22.html" title="kafka核心技术与实战">kafka核心技术与实战</a><time datetime="2022-02-21T05:18:23.000Z" title="发表于 2022-02-21 13:18:23">2022-02-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ab05b615.html" title="HashMap精选13问"><img src="https://s2.loli.net/2023/08/05/KFyVCtN5YPgT8hs.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HashMap精选13问"/></a><div class="content"><a class="title" href="/posts/ab05b615.html" title="HashMap精选13问">HashMap精选13问</a><time datetime="2022-02-11T05:11:20.000Z" title="发表于 2022-02-11 13:11:20">2022-02-11</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/"><span class="card-category-list-name">java面试八股文</span><span class="card-category-list-count">16</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%9B%86%E5%90%88/"><span class="card-category-list-name">中间件集合</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/"><span class="card-category-list-name">经验分享</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/RocketMq%E7%AF%87/" style="font-size: 1.1em; color: #999">RocketMq篇</a> <a href="/tags/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E7%AF%87/" style="font-size: 1.1em; color: #999">集合框架篇</a> <a href="/tags/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4%E4%B8%93%E6%A0%8F/" style="font-size: 1.1em; color: #999">极客时间专栏</a> <a href="/tags/java%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87/" style="font-size: 1.5em; color: #99a9bf">java面试八股文</a> <a href="/tags/23%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.1em; color: #999">23种设计模式</a> <a href="/tags/dubbo%E7%AF%87/" style="font-size: 1.1em; color: #999">dubbo篇</a> <a href="/tags/MongoDB/" style="font-size: 1.1em; color: #999">MongoDB</a> <a href="/tags/java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 1.1em; color: #999">java并发编程</a> <a href="/tags/java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 1.1em; color: #999">java基础知识</a> <a href="/tags/mysql%E7%AF%87/" style="font-size: 1.1em; color: #999">mysql篇</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/" style="font-size: 1.1em; color: #999">分布式系统</a> <a href="/tags/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/" style="font-size: 1.1em; color: #999">经验分享</a> <a href="/tags/redis%E7%AF%87/" style="font-size: 1.1em; color: #999">redis篇</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.1em; color: #999">操作系统</a> <a href="/tags/HashMap%E7%B2%BE%E9%80%8913%E9%97%AE/" style="font-size: 1.1em; color: #999">HashMap精选13问</a> <a href="/tags/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/" style="font-size: 1.1em; color: #999">极客时间</a> <a href="/tags/spring%E6%A1%86%E6%9E%B6%E7%AF%87/" style="font-size: 1.1em; color: #999">spring框架篇</a> <a href="/tags/JVM%E7%AF%87/" style="font-size: 1.1em; color: #999">JVM篇</a> <a href="/tags/vue/" style="font-size: 1.1em; color: #999">vue</a> <a href="/tags/kafka/" style="font-size: 1.3em; color: #99a1ac">kafka</a> <a href="/tags/mybatis%E7%AF%87/" style="font-size: 1.1em; color: #999">mybatis篇</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%9B%86%E5%90%88/" style="font-size: 1.3em; color: #99a1ac">中间件集合</a> <a href="/tags/ElementUI/" style="font-size: 1.1em; color: #999">ElementUI</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 1.1em; color: #999">计算机网络</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">2022年03月</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">2022年02月</span><span class="card-archive-list-count">13</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">2022年01月</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/05/"><span class="card-archive-list-date">2020年05月</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">19</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">216k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s1.imagehub.cc/images/2023/08/03/index-img.jpeg')"><div id="footer-wrap"><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">沪指傀儡师</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.19/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://unpkg.com/typed.js@2.0.14/dist/typed.umd.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (true) {
        const sub = []
        const content = result.data.content
        sub.unshift(content)
        typedJSFn.init(sub)
      } else {
        document.getElementById('subtitle').textContent = result.data.content
      }
    })
  })
}
typedJSFn.run(subtitleType)
</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.2.2/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        const urlArray = data.body.match(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/ig)
        if (data.user.login === 'utterances-bot') {
          return urlArray.pop()
        } else {
          return urlArray.shift()
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/hzkls/hzkls.github.io/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>